# 並列ファイル作成スキル（役割別対応版）
# ================================

name: "parallel-file-creation"
version: "2.0.0"
description: |
  複数の足軽が、それぞれの専門ペルソナに応じたファイルを並列作成する。
  開発者はコードを、ライターはドキュメントを、デザイナーはスタイルを作成。

created_by: "shogun"
created_at: "2026-01-30T12:30:00+09:00"
updated_at: "2026-01-30T12:45:00+09:00"
approved_by: "human"

# ペルソナと担当ファイルタイプの対応
persona_file_mapping:
  senior_engineer:
    name: "熟練の技師"
    specialty: "コーディング、アーキテクチャ、デバッグ"
    file_types:
      - "*.ts, *.tsx, *.js, *.jsx"
      - "*.py, *.go, *.rs"
      - "*.json (設定ファイル)"
    example_tasks:
      - "APIエンドポイントの実装"
      - "コンポーネントの作成"
      - "ユーティリティ関数の実装"

  technical_writer:
    name: "記録係"
    specialty: "ドキュメント作成、説明文"
    file_types:
      - "*.md (README, ガイド)"
      - "*.txt"
      - "CHANGELOG, CONTRIBUTING"
    example_tasks:
      - "README作成"
      - "API仕様書作成"
      - "使用ガイド作成"

  analyst:
    name: "軍師"
    specialty: "調査、分析、計画立案"
    file_types:
      - "*.md (分析レポート)"
      - "*.yaml (設計定義)"
      - "*.json (データ分析結果)"
    example_tasks:
      - "要件分析ドキュメント"
      - "競合調査レポート"
      - "技術選定資料"

  ui_designer:
    name: "意匠師"
    specialty: "デザイン、UX、スタイリング"
    file_types:
      - "*.css, *.scss"
      - "*.svg"
      - "tailwind.config.js"
    example_tasks:
      - "スタイルシート作成"
      - "カラーパレット定義"
      - "レスポンシブデザイン実装"

  tester:
    name: "検分役"
    specialty: "テスト、検証、品質確認"
    file_types:
      - "*.test.ts, *.spec.ts"
      - "*.test.js, *.spec.js"
      - "e2e/*.ts"
    example_tasks:
      - "ユニットテスト作成"
      - "E2Eテスト作成"
      - "テストデータ準備"

  devops:
    name: "陣地構築師"
    specialty: "デプロイ、インフラ、CI/CD"
    file_types:
      - "Dockerfile"
      - ".github/workflows/*.yaml"
      - "vercel.json, netlify.toml"
    example_tasks:
      - "CI/CDパイプライン構築"
      - "Docker設定"
      - "デプロイ設定"

# 入力スキーマ
input:
  type: object
  required:
    - tasks
  properties:
    tasks:
      type: array
      description: "作成するタスクのリスト（ペルソナ別）"
      items:
        type: object
        required:
          - file
          - persona
        properties:
          file:
            type: string
            description: "作成するファイルパス"
          persona:
            type: string
            enum: ["senior_engineer", "technical_writer", "analyst", "ui_designer", "tester", "devops"]
            description: "担当ペルソナ"
          description:
            type: string
            description: "ファイルの目的・内容の説明"
          requirements:
            type: array
            description: "具体的な要件リスト"
            items:
              type: string
    output_dir:
      type: string
      default: "."
      description: "ベース出力ディレクトリ"

# 出力スキーマ
output:
  type: object
  properties:
    success:
      type: boolean
    results:
      type: array
      items:
        type: object
        properties:
          file:
            type: string
          persona:
            type: string
          status:
            type: string
            enum: ["completed", "failed"]

# 使用例
examples:
  - name: "機能開発（複数役割）"
    prompt: |
      新しいユーザー認証機能を作成してください：
      - 開発者: auth.ts（認証ロジック）
      - テスター: auth.test.ts（テスト）
      - ライター: AUTH.md（仕様書）
    input:
      tasks:
        - file: "lib/auth.ts"
          persona: "senior_engineer"
          description: "ユーザー認証ロジック"
          requirements:
            - "JWT認証"
            - "リフレッシュトークン対応"
        - file: "lib/auth.test.ts"
          persona: "tester"
          description: "認証ロジックのテスト"
          requirements:
            - "正常系テスト"
            - "異常系テスト"
        - file: "docs/AUTH.md"
          persona: "technical_writer"
          description: "認証機能の仕様書"

  - name: "UI機能開発"
    prompt: |
      ダークモード機能を実装：
      - 開発者: ThemeProvider.tsx
      - デザイナー: theme.css
      - ライター: THEME.md
    input:
      tasks:
        - file: "components/ThemeProvider.tsx"
          persona: "senior_engineer"
          description: "テーマ切り替えプロバイダー"
        - file: "styles/theme.css"
          persona: "ui_designer"
          description: "ダークモード用スタイル"
        - file: "docs/THEME.md"
          persona: "technical_writer"
          description: "テーマ機能の使用方法"

  - name: "インフラ構築"
    prompt: |
      CI/CD環境を構築：
      - DevOps: GitHub Actions
      - ライター: デプロイガイド
    input:
      tasks:
        - file: ".github/workflows/ci.yaml"
          persona: "devops"
          description: "CI/CDパイプライン"
        - file: "docs/DEPLOY.md"
          persona: "technical_writer"
          description: "デプロイ手順書"

# 実行手順
execution_steps:
  1: "将軍がタスク一覧を分析"
  2: "家老がペルソナ別にタスクを分配"
  3: "各足軽が専門ペルソナとして担当ファイルを作成"
  4: "家老が報告を集約"
  5: "将軍が結果を報告"

# 制約
constraints:
  - "各足軽は自分の担当ファイルのみ作成"
  - "ペルソナに適したファイル形式・内容を作成"
  - "他の足軽のファイルに依存する場合は順序を考慮"

tags:
  - multi-role
  - parallel
  - development
  - automation
